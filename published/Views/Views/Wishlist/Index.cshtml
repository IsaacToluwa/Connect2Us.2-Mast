@model Connect2Us.Models.Wishlist

@{
    ViewBag.Title = "My Wishlist - Connect2US";
}

<div class="container">
    <h2><i class="fas fa-heart"></i> @ViewBag.Title</h2>
    <hr />

    @if (Model == null || !Model.WishlistItems.Any())
    {
        <div class="jumbotron text-center">
            <h3><i class="fas fa-heart"></i> Your wishlist is empty</h3>
            <p class="lead">Save your favorite books here for easy access later!</p>
            <p>@Html.ActionLink("Browse Books", "Index", "Home", null, new { @class = "btn btn-primary btn-lg" })</p>
        </div>
    }
    else
    {
        <div class="row">
            @foreach (var item in Model.WishlistItems)
            {
                <div class="col-md-4 mb-4">
                    <div class="card h-100">
                        <img src="@item.Product.ImageUrl" class="card-img-top" alt="@item.Product.Name" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">@item.Product.Name</h5>
                            <p class="card-text">
                                <strong>Author:</strong> @item.Product.Author<br/>
                                <strong>Price:</strong> $@item.Product.Price<br/>
                                <strong>Category:</strong> @item.Product.Category.Name
                            </p>
                            <div class="btn-group" role="group">
                                @using (Html.BeginForm("AddToCart", "Cart", FormMethod.Post, new { @class = "d-inline" }))
                                {
                                    @Html.AntiForgeryToken()
                                    @Html.Hidden("productId", item.Product.Id)
                                    @Html.Hidden("quantity", 1)
                                    <button type="submit" class="btn btn-primary btn-sm">
                                        <i class="fas fa-shopping-cart"></i> Add to Cart
                                    </button>
                                }
                                @using (Html.BeginForm("RemoveFromWishlist", "Wishlist", FormMethod.Post, new { @class = "d-inline", style = "margin-left: 5px;" }))
                                {
                                    @Html.AntiForgeryToken()
                                    @Html.Hidden("productId", item.Product.Id)
                                    <button type="submit" class="btn btn-outline-danger btn-sm" title="Remove from wishlist">
                                        <i class="fas fa-times"></i> Remove
                                    </button>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
        
        <div class="row">
            <div class="col-md-12">
                <div class="well text-center">
                    <p class="lead">Found something you like? Add items to your cart to proceed with your purchase!</p>
                    @Html.ActionLink("Continue Shopping", "Index", "Home", null, new { @class = "btn btn-default btn-lg" })
                    @Html.ActionLink("Go to Cart", "Index", "Cart", null, new { @class = "btn btn-primary btn-lg" })
                </div>
            </div>
        </div>
    }
</div>